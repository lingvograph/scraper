"use strict";function e(e,t,r,n,a,o,i){try{var s=e[o](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,a)}function t(t){return function(){var r=this,n=arguments;return new Promise((function(a,o){var i=t.apply(r,n);function s(t){e(i,a,o,s,u,"next",t)}function u(t){e(i,a,o,s,u,"throw",t)}s(void 0)}))}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function n(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return r(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}Object.defineProperty(exports,"__esModule",{value:!0});var a,o=(function(e){var t=function(e){var t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var a=Object.create((t&&t.prototype instanceof p?t:p).prototype),o=new A(n||[]);return a._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return{value:void 0,done:!0}}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var s=w(i,r);if(s){if(s===l)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=c(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,o),a}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var l={};function p(){}function d(){}function f(){}var h={};h[a]=function(){return this};var m=Object.getPrototypeOf,g=m&&m(m(E([])));g&&g!==t&&r.call(g,a)&&(h=g);var v=f.prototype=p.prototype=Object.create(h);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){var n;this._invoke=function(a,o){function i(){return new t((function(n,i){!function n(a,o,i,s){var u=c(e[a],e,o);if("throw"!==u.type){var l=u.arg,p=l.value;return p&&"object"==typeof p&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,i,s)}),(function(e){n("throw",e,i,s)})):t.resolve(p).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,s)}))}s(u.arg)}(a,o,n,i)}))}return n=n?n.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=c(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function E(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=v.constructor=f,f.constructor=d,d.displayName=s(f,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(y.prototype),y.prototype[o]=function(){return this},e.AsyncIterator=y,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new y(u(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),s(v,i,"Generator"),v[a]=function(){return this},v.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=E,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,l):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;k(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:E(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}}(a={exports:{}}),a.exports),i=require("lodash/trim");function s(e){return i(null==e?void 0:e.trim(),"​")}function u(){return!("[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0))&&"undefined"!=typeof window}var c=u(),l={type:"universal",name:"macmillan",url:"https://www.macmillandictionary.com",makeUrl:function(e){return"/dictionary/british/"+encodeURIComponent(e.text)},plan:[{selector:".audio_play_button",audio:["@data-src-mp3","@data-src-ogg"]},{selector:".PRON",term:"transcription"},{selector:".PART-OF-SPEECH",term:"tag"},{selector:".SYNTAX-CODING",term:"tag"},{selector:".DEFINITION",term:"definition"},{selector:".EXAMPLES",term:"in"},{selector:".PHR-XREF",term:"in"},{selector:".synonyms .theslink",exclude:["..."],term:"synonym"}]};const p="function"==typeof atob,d="function"==typeof Buffer,f="function"==typeof TextDecoder?new TextDecoder:void 0,h=("function"==typeof TextEncoder&&new TextEncoder,[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="]),m=(e=>{let t={};return h.forEach((e,r)=>t[e]=r),t})(),g=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,v=String.fromCharCode.bind(String),b="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):(e,t=(e=>e))=>new Uint8Array(Array.prototype.slice.call(e,0).map(t)),y=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),w=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,x=e=>{switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return v(55296+(t>>>10))+v(56320+(1023&t));case 3:return v((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return v((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},k=p?e=>atob(y(e)):d?e=>Buffer.from(e,"base64").toString("binary"):e=>{if(e=e.replace(/\s+/g,""),!g.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(3&e.length));let t,r,n,a="";for(let o=0;o<e.length;)t=m[e.charAt(o++)]<<18|m[e.charAt(o++)]<<12|(r=m[e.charAt(o++)])<<6|(n=m[e.charAt(o++)]),a+=64===r?v(t>>16&255):64===n?v(t>>16&255,t>>8&255):v(t>>16&255,t>>8&255,255&t);return a},A=d?e=>b(Buffer.from(e,"base64")):e=>b(k(e),e=>e.charCodeAt(0)),E=d?e=>Buffer.from(e,"base64").toString("utf8"):f?e=>f.decode(A(e)):e=>k(e).replace(w,x);var j=new Map([["австралия","australia"],["вануату","vanuatu"],["кирибати","kiribati"],["маршалловы острова","marshall islands"],["науру","nauru"],["новая зеландия","new zealand"],["палау","palau"],["папуа — новая гвинея","papua new guinea"],["самоа","samoa"],["соломоновы острова","solomon islands"],["тонга","tonga"],["тувалу","tuvalu"],["федеративные штаты микронезии","federated states of micronesia"],["фиджи","fiji"],["абхазия","abkhazia"],["азербайджан","azerbaijan"],["армения","armenia"],["афганистан","afghanistan"],["бангладеш","bangladesh"],["бахрейн","bahrain"],["бруней","brunei"],["бутан","bhutan"],["восточный тимор","east timor"],["вьетнам","vietnam"],["грузия","georgia"],["израиль","israel"],["индия","india"],["индонезия","indonesia"],["иордания","jordan"],["ирак","iraq"],["иран","iran"],["йемен","yemen"],["казахстан","kazakhstan"],["камбоджа","cambodia"],["катар","qatar"],["киргизия","kyrgyzstan"],["китай","china"],["кувейт","kuwait"],["лаос","laos"],["ливан","lebanon"],["малайзия","malaysia"],["мальдивы","maldives"],["монголия","mongolia"],["мьянма","myanmar"],["непал","nepal"],["оаэ","uae"],["оман","oman"],["пакистан","pakistan"],["россия","russia"],["саудовская аравия","saudi arabia"],["северная корея","north korea"],["сингапур","singapore"],["сирия","syria"],["таджикистан","tajikistan"],["таиланд","thailand"],["тайва́нь","taiwan"],["туркмения","turkmenistan"],["турция","turkey"],["узбекистан","uzbekistan"],["филиппины","philippines"],["шри-ланка","sri lanka"],["южная корея","south korea"],["южная осетия","south ossetia"],["япония","japan"],["алжир","algeria"],["ангола","angola"],["бенин","benin"],["ботсвана","botswana"],["буркина фасо","burkina faso"],["бурунди","burundi"],["габон","gabon"],["гамбия","gambia"],["гана","ghana"],["гвинея","guinea"],["гвинея-бисау","guinea-bissau"],["джибути","djibouti"],["египет","egypt"],["замбия","zambia"],["зимбабве","zimbabwe"],["кабо-верде","cape verde"],["камерун","cameroon"],["кения","kenya"],["коморы","comoros"],["демократическая республика конго","democratic republic of the congo"],["республика конго","republic of the congo"],["кот-д’ивуар","côte d'ivoire"],["лесото","lesotho"],["либерия","liberia"],["ливия","libya"],["маврикий","mauritius"],["мавритания","mauritania"],["мадагаскар","madagascar"],["малави","malawi"],["мали","mali"],["марокко","morocco"],["мозамбик","mozambique"],["намибия","namibia"],["нигер","niger"],["нигерия","nigeria"],["руанда","rwanda"],["сан-томе и принсипи","sao tome and principe"],["свазиленд","swaziland"],["сейшелы","seychelles"],["сенегал","senegal"],["сомали","somalia"],["судан","sudan"],["сьерра-леоне","sierra leone"],["танзания","tanzania"],["того","togo"],["тунис","tunisia"],["уганда","uganda"],["центральноафриканская республика","central african republic"],["чад","chad"],["экваториальная гвинея","equatorial guinea"],["эритрея","eritrea"],["эфиопия","ethiopia"],["южно-африканская республика","south africa"],["австрия","austria"],["албания","albania"],["андорра","andorra"],["англия","england"],["белоруссия","belarus"],["бельгия"," belgium"],["болгария","bulgaria"],["босния и герцеговина","bosnia and herzegovina"],["ватикан","vatican"],["великобритания","great britain"],["венгрия","hungary"],["германия","germany"],["греция","greece"],["дания","denmark"],["ирландия","ireland"],["исландия","iceland"],["испания","spain"],["италия","italy"],["кипр","cyprus"],["косово","kosovo"],["латвия","latvia"],["литва","lithuania"],["лихтенштейн","liechtenstein"],["люксембург","luxembourg"],["македония","macedonia"],["мальта","malta"],["молдавия","moldova"],["монако","monaco"],["нидерланды","netherlands"],["норвегия","norway"],["польша","poland"],["португалия","portugal"],["россия","russia"],["румыния","romania"],["сан-марино","san marino"],["сербия","serbia"],["словакия","slovakia"],["словения","slovenia"],["северного кипра","northern cyprus"],["северная ирландия","northern ireland"],["турция","turkey"],["украина","ukraine"],["уэльс","wales"],["финляндия","finland"],["франция","france"],["хорватия","croatia"],["черногория","montenegro"],["чехия","czech republic"],["швейцария","switzerland"],["швеция","sweden"],["шотландия","scotland"],["эстония","estonia"],["антигуа и барбуда","antigua and barbuda"],["багамы","bahamas"],["барбадос","barbados"],["белиз","belize"],["гаити","haiti"],["гватемала","guatemala"],["гондурас","honduras"],["гренада","grenada"],["доминика","dominica"],["доминиканская республика","dominican republic"],["канада","canada"],["коста-рика","costa rica"],["мексика","mexico"],["никарагуа","nicaragua"],["панама","panama"],["сальвадор","el salvador"],["сент-люсия","saint lucia"],["сент-винсент и гренадины"," saint vincent and the grenadines"],["сент-китс и невис","saint kitts and nevis"],["соединённые штаты америки (сша)","united states of america (usa)"],["тринидад и тобаго","trinidad and tobago"],["ямайка","jamaica"],["аргентина","argentina"],["бразилия","brazil"],["боливия","bolivia"],["венесуэла","venezuela"],["гайана","guyana"],["колумбия","colombia"],["парагвай","paraguay"],["перу","peru"],["суринам","suriname"],["уругвай","uruguay"],["французская гвиана","french guiana"],["чили","chile"],["эквадор","ecuador"]]),C=require("lodash/trimEnd"),L=require("lodash/trimStart"),S=require("lodash/isEmpty"),q=encodeURIComponent;function P(e){return e&&e.startsWith("'")?e.substr(1,e.length-2):e}function O(e){if(e){var t=e.indexOf("("),r=e.indexOf(")");return{name:e.substr(0,t),args:e.substr(t+1,r-t-1).split(",").map(P)}}}function z(e){if(e){var t=(e=C(L(e,"("),")")).split(",");if(!S(t)){var r,n,a={gender:(r=t[0],"женщина"===(r=s(r))?"f":"мужчина"===r?"m":r)};return 2===t.length&&(a.country=(n=s(t[1]).toLowerCase(),j.get(n))),a}}}var U={type:"audio",name:"forvo",url:"https://forvo.com",makeUrl:function(e){var t=e.lang;return"https://ru.forvo.com/word/"+q(e.text)+"/#"+t},plan:[{selector:"article.pronunciations ul.show-all-pronunciations li",parse:function(){var e=t(o.mark((function e(t){var r,n,a,i,s,u,c,l,p;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.querySelectorAll("span.play");case 2:if(r=e.sent[0]){e.next=5;break}return e.abrupt("return",void 0);case 5:return e.t0=O,e.next=8,r.getAttribute("onclick");case 8:if(e.t1=e.sent,(n=(0,e.t0)(e.t1))&&"Play"===n.name){e.next=12;break}return e.abrupt("return",void 0);case 12:if(a=E(y(n.args[4].replace(/[-_]/g,e=>"-"==e?"+":"/"))),(i="https://audio00.forvo.com/audios/mp3/"+a).endsWith(".mp3")){e.next=16;break}return e.abrupt("return",void 0);case 16:return s={url:i},e.next=19,t.querySelectorAll("span.ofLink");case 19:if(!(u=e.sent[0])){e.next=25;break}return e.next=23,u.getAttribute("data-p2");case 23:(c=e.sent)&&(s.author=c);case 25:return e.next=27,t.querySelectorAll("span.from");case 27:if(!(l=e.sent[0])){e.next=35;break}return e.t2=z,e.next=32,l.textContent();case 32:e.t3=e.sent,(p=(0,e.t2)(e.t3))&&Object.assign(s,p);case 35:return e.abrupt("return",[{audio:s}]);case 36:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]},_={type:"audio",name:"howjsay",url:"https://howjsay.com",makeUrl:function(e){return"/mp3/"+encodeURIComponent(e.text)+".mp3"},getData:function(e){return t(o.mark((function t(){return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{audio:[{url:e}]});case 1:case"end":return t.stop()}}),t)})))()}},I={type:"universal",name:"merriam-webster",url:"https://www.merriam-webster.com",makeUrl:function(e){return"/dictionary/"+encodeURIComponent(e.text)},plan:[{selector:"span.prs a.play-pron",audio:function(){var e=t(o.mark((function e(t){var r,n;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getAttribute("data-lang");case 2:return r=e.sent.replace("_","/"),e.next=5,t.getAttribute("data-dir");case 5:return n=e.sent,e.next=8,t.getAttribute("data-file");case 8:return e.abrupt("return","https://media.merriam-webster.com/audio/prons/"+r+"/mp3/"+n+"/"+e.sent+".mp3");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{selector:"span.prs span.pr",term:"transcription"},{selector:"div.vg .dt",term:"definition",lstrip:":"},{selector:".ex-sent.t",term:"in"},{selector:".ure",term:"related"},{selector:"span.fl",term:"tag"}]},T=require("lodash/map"),F="div.page div.dictionary div.pos-header",N="div.page div.dictionary div.pos-body",R={ru:"english-russian",fr:"english-french",de:"english-german"};function D(e,t){return"/dictionary/"+t+"/"+encodeURIComponent(e.replace(" ","-"))}var B={type:"universal",name:"cambridge",url:"https://dictionary.cambridge.org",makePages:function(e){var t=e.text;return[{url:D(t,"english"),plan:[{selector:F+" span.dpron-i amp-audio source",audio:["@src"]},{selector:F+" span.dpron-i span.ipa",term:"transcription"},{selector:F+" .posgram .pos",term:"tag"},{selector:F+" .posgram .gram .gc",term:"tag",map:function(e){return{C:"countable",U:"uncountable",S:"singular"}[e]||void 0}},{selector:N+" div.def-block div.def",term:"definition"},{selector:N+" div.def-block amp-img",visual:["@src"]},{selector:N+" div.def-block span.eg",term:"in"},{selector:"div.page div.dataset span.deg",term:"in"},{selector:"div.page div.dataset div.cpegs div.lbb a.hdib",term:"collocation"}]}].concat(T(R,(function(e,r){return{url:D(t,e),plan:[{selector:".sense-body .trans",term:"translated_as@"+r}]}})))}},G=require("lodash/trimEnd"),W=require("lodash/trimStart"),$={type:"universal",name:"urban-dictionary",url:"https://www.urbandictionary.com",makeUrl:function(e){return"/define.php?term="+encodeURIComponent(e.text)},plan:[{selector:"#content div.def-panel a.play-sound",audio:["@data-urls"],map:function(e){return G(W(e,'["'),'"]')}},{selector:"#content div.def-panel div.meaning",term:"definition"}]},M=require("fetch-ponyfill")().fetch,Y=require("cheerio");function Z(e,t,r){void 0===r&&(r=function(){return!0});var n=[];return t.each((function(t,a){r(a)&&n.push(new H(e,e(a)))})),n}var H=function(){function e(e,t){this.$=e,this.elem=t}var r=e.prototype;return r.querySelectorAll=function(e){return Promise.resolve(this.querySelectorAllImpl(e))},r.querySelectorAllImpl=function(e){if("#children"===e){var t=this.elem.children();return Z(this.$,t)}if("#text"===e){var r=this.elem.contents();return Z(this.$,r,(function(e){return"text"===e.type}))}return Z(this.$,this.elem.find(e))},r.getAttribute=function(){var e=t(o.mark((function e(t){return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.elem.attr(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.textContent=function(){var e=t(o.mark((function e(){return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.elem.text());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e}(),X=function(){function e(e){this.$=Y.load(e)}var t=e.prototype;return t.querySelectorAll=function(e){var t=this.$(e);return Promise.resolve(Z(this.$,t))},t.close=function(){return Promise.resolve(void 0)},t.getAttribute=function(e){return Promise.resolve("")},t.textContent=function(){return Promise.resolve("")},e}();function V(){return(V=t(o.mark((function e(t){var r,n;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c&&(t="https://api.allorigins.win/raw?url="+encodeURIComponent(t)),r={Accept:"text/html,application/xhtml+xml"},c||(r["User-Agent"]="lingua-bot"),e.next=5,M(t,{headers:r});case 5:if((n=e.sent).ok){e.next=8;break}throw new Error(n.statusText);case 8:return e.next=10,n.text();case 10:return e.abrupt("return",new X(e.sent));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e,t){return function(e){return V.apply(this,arguments)}(t)}var K=require("lodash/forEach"),Q=require("lodash/isArray"),ee=require("lodash/isString"),te=require("lodash/isNil"),re=require("lodash/mapValues"),ne=require("lodash/isEmpty"),ae=require("lodash/flatten"),oe=[{type:"visual",name:"unsplash",url:"https://unsplash.com",makeUrl:function(e){return"/s/photos/"+e.text.replace(" ","-")},plan:[{selector:'div[data-test="search-photos-route"] figure img',exclude:["^https://images.unsplash.com/profile-"],visual:["@src"]}]},I,l,B,$,U,_];function ie(e){return{type:e.type,name:e.name,url:e.url}}function se(e,t){return ue.apply(this,arguments)}function ue(){return(ue=t(o.mark((function e(r,a){var i,u,c,l,p,d,f,h,m,g,v,b;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i={},u=function(e){e&&!i[e]&&(i[e]=new Set)},c=function(){var e=t(o.mark((function e(t,a,s){var c,l,p,d,f,h,m,g;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(t),c=t?i[t]:void 0,e.next=4,r.querySelectorAll(a.selector);case 4:l=n(e.sent);case 6:if((p=l()).done){e.next=16;break}return d=p.value,e.next=10,s(a,d);case 10:if(Q(f=e.sent)){e.next=13;break}return e.abrupt("continue",14);case 13:for(h=n(f.filter((function(e){return!te(e)&&""!==e})));!(m=h()).done;)g=m.value,c?c.add(g):K(g,(function(e,t){u(t),i[t].add(e)}));case 14:e.next=6;break;case 16:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),l=function(e,t){return!!e.exclude&&e.exclude.some((function(e){return e.startsWith("^")?t.startsWith(e.substr(1)):t===e}))},p=function(){var e=t(o.mark((function e(t,r){var n;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=s,e.next=3,r.textContent();case 3:if(e.t1=e.sent,n=(0,e.t0)(e.t1)){e.next=7;break}return e.abrupt("return",void 0);case 7:if(!l(t,n)){e.next=9;break}return e.abrupt("return",void 0);case 9:if(t.lstrip&&n.startsWith(t.lstrip)&&(n=s(n.substr(t.lstrip.length))),n){e.next=12;break}return e.abrupt("return",void 0);case 12:if(t.map&&(n=t.map(n)),n){e.next=15;break}return e.abrupt("return",void 0);case 15:return e.abrupt("return",[n]);case 16:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),d=function(){var e=t(o.mark((function e(t,r,a){var i,u,c,p,d,f;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=[],!Q(a)){e.next=33;break}u=n(a);case 3:if((c=u()).done){e.next=31;break}if(d=void 0,!ee(p=c.value)){e.next=20;break}if(!p.startsWith("@")){e.next=13;break}return e.next=10,r.getAttribute(p.substr(1));case 10:d=e.sent,e.next=18;break;case 13:return e.t0=s,e.next=16,r.text();case 16:e.t1=e.sent,d=(0,e.t0)(e.t1);case 18:e.next=23;break;case 20:return e.next=22,p(r);case 22:d=e.sent;case 23:if(!l(t,d)){e.next=25;break}return e.abrupt("continue",29);case 25:if(t.map&&(d=t.map(d)),d){e.next=28;break}return e.abrupt("continue",29);case 28:i.push(d);case 29:e.next=3;break;case 31:e.next=37;break;case 33:return e.next=35,a(r);case 35:l(t,f=e.sent)||(t.map&&(f=t.map(f)),f&&i.push(f));case 37:return e.abrupt("return",0===i.length?void 0:i);case 38:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),f=function(){var e=t(o.mark((function e(t,r){return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(t,r,t.audio);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),h=function(){var e=t(o.mark((function e(t,r){return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(t,r,t.visual);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),m=function(e,t){return e.parse(t)},g=o.mark((function e(){var n,a;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=b.value).term){e.next=6;break}return e.next=4,c(n.term,n,p);case 4:e.next=29;break;case 6:if(!n.audio){e.next=11;break}return e.next=9,c("audio",n,f);case 9:e.next=29;break;case 11:if(!n.visual){e.next=16;break}return e.next=14,c("visual",n,h);case 14:e.next=29;break;case 16:if(!n.parse){e.next=21;break}return e.next=19,c(void 0,n,m);case 19:e.next=29;break;case 21:if(!n.obj){e.next=29;break}return e.next=24,r.querySelectorAll(n.selector);case 24:return a=e.sent,e.next=27,Promise.all(a.map(function(){var e=t(o.mark((function e(r){return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(Object.keys(n.obj.plan).map(function(){var e=t(o.mark((function e(t){var a;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.obj.plan[t],e.next=3,se(r,[a]);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return e.abrupt("return",e.sent.reduce((function(e,t){return Object.assign(e,t)}),{}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 27:i[n.obj.key]=e.sent;case 29:case"end":return e.stop()}}),e)})),v=n(a);case 11:if((b=v()).done){e.next=15;break}return e.delegateYield(g(),"t0",13);case 13:e.next=11;break;case 15:return e.abrupt("return",re(i,(function(e){return Array.from(e)})));case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(e,t,r){return le.apply(this,arguments)}function le(){return(le=t(o.mark((function e(t,r,n){return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se(t,r);case 2:return e.abrupt("return",{source:n,data:e.sent});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pe(e,t,r){return de.apply(this,arguments)}function de(){return(de=t(o.mark((function e(t,r,n){var a,i;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(0,t);case 2:return a=e.sent,e.next=5,ce(a,r,ie(n));case 5:return(i=e.sent).source.url=t,e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fe(e){return function(){var r=t(o.mark((function t(r){var n,a,i,s;return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n={text:r.text,lang:r.lang||"en"},!e.makePages){t.next=7;break}return t.next=5,Promise.all(e.makePages(n).map((function(t){var r=t.url;return r.startsWith("/")&&(r=e.url+r),pe(r,t.plan,e)})));case 5:return t.abrupt("return",t.sent);case 7:if((a=e.makeUrl(n)).startsWith("/")&&(a=e.url+a),!e.getData){t.next=23;break}return t.prev=10,t.next=13,e.getData(a,n);case 13:return i=t.sent,(s={source:ie(e),data:i}).source.url=a,t.abrupt("return",[s]);case 19:return t.prev=19,t.t0=t.catch(10),console.log("error",e.name,t.t0),t.abrupt("return",[{source:ie(e),error:t.t0}]);case 23:return t.prev=23,t.next=26,pe(a,e.plan,e);case 26:return t.abrupt("return",[t.sent]);case 30:return t.prev=30,t.t1=t.catch(23),console.log("error",e.name,t.t1),t.abrupt("return",[{source:ie(e),error:t.t1}]);case 34:case"end":return t.stop()}}),t,null,[[10,19],[23,30]])})));return function(e){return r.apply(this,arguments)}}()}exports.fetchData=function(e,t){void 0===t&&(t={});var r=t.sources||oe.filter((function(e){return!(t.type&&e.type!==t.type&&"universal"!==e.type||!ne(t.include)&&!t.include.some((function(t){return e.name.toLowerCase()===t.toLowerCase()}))||!ne(t.exclude)&&t.exclude.some((function(t){return e.name.toLowerCase()===t.toLowerCase()})))}));return Promise.all(r.map(fe).map((function(t){return t(e)}))).then((function(e){return ae(e)}))},exports.makeParser=fe,exports.ogden={categories:[{name:"Color / Visual",words:["see","look","color","dark","light","beautiful","shade","black","blue","brown","clear","gray","green","orange","red","yellow","white","brass","copper","gold","silver","sky"]},{name:"Direction",words:["about","across","after","against","among","at","between","by","in","with","through","forward","here","over","under","up","down","on","off","with","direction","distance","north","south","east","west","left","right","front","back","high","low","far","near"]},{name:"Time",words:["about","after","at","before","between","till","while","when","again","ever","now","still","tomorrow","yesterday","second","minute","day","week","month","year","fall","spring","winter","summer","night","time","clock","first","second","last","morning","night","early","late","slow","quick"]},{name:"Animals",words:["animal","ant","bee","bird","cat","cow","dog","egg","fish","fly","fowl","goat","horse","insect","monkey","pig","rat","sheep","snake","sponge","worm","silk","worm"]},{name:"Food and Drink",words:["apple","berry","bread","butter","cake","cheese","drink","egg","food","fish","fruit","grain","meal","meat","milk","nut","orange","potato","rice","root","salt","seed","soup","sugar","water","wine","alcohol","beef","beer","champagne","chocolate","citron","coffee","cocktail","cognac","liqueur","macaroni","olive","omelet","rum","salad","sardine","tapioca","tea","toast","vanila","vodka","whisky"]},{name:"Household",words:["building","bread","butter","canvas","cloth","coal","cook","drink","family","food","linen","meal","meat","milk","money","play","rice","room","silk","sleep","soup","step","sugar","vessel","walk","wash","wine","wool","basket","bath","bed","bell","blade","board","book","boot","bottle","box","brick","brush","bucket","bulb","button","cake","camera","card","cart","carriage","chain","cheese","chest","clock","coat","collar","comb","cord","cup","curtain","cushion","door","drain","drawer","dress","flag","floor","fork","frame","glove","hat","jewel","kettle","key","knife","knot","lock","map","match","nail","needle","oven","parcel","pen","pencil","picture","pin","pipe","plate","plow","pot","pump","rail","ring","rod","roof","screw","shelf","shirt","shoe","skirt","sock","spade","sponge","spoon","stamp","stick","stocking","table","thread","ticket","tray","trousers","umbrella","wall","watch","wheel","whip","whistle","window","wire"]},{name:"Clothes",words:["boot","button","coat","collar","dress","glove","hat","shirt","shoe","silk","skirt","sock","stocking","trousers","umbrella","watch"]},{name:"Tools",words:["band","blade","brush","bucket","cord","gun","hammer","hook","knife","knot","nail","needle","pin","pipe","plow","pump","ring","rod","screw","spade","wheel","wire"]},{name:"Buildings",words:["bridge","building","church","hospital","house","library","prison","school","structure","station","store","street","town","train","wall"]},{name:"People",words:["baby","boy","daughter","family","father","female","friend","girl","male","man","married","mother","person","relation","self","sister","son","woman","chief","cook","manager","porter","secretary","servant","work","roof"]},{name:"Body Parts",words:["arm","body","bone","brain","chest","chin","ear","eye","face","fat","feather","finger","foot","hair","hand","head","heart","horn","knee","leg","lip","mind","mouth","muscle","neck","nerve","nose","skin","stomach","tail","throat","thumb","toe","tongue","tooth","wing","cough","dead","death","disease","feeble","ill","pain","sneeze"]},{name:"Materials",words:["brass","copper","glass","gold","iron","leather","material","metal","silver","steel","tin","wood","brick","canvas","cloth","coal","linen","silk","tree","wool"]},{name:"Transport",words:["boat","bridge","carriage","flight","harbor","sail","sea","train","transport","plane","rail","river","road","wheel","whistle"]},{name:"Business / Industry",words:["agreement","business","committee","company","competition","credit","debt","development","distribution","division","exchange","expansion","growth","harbor","industry","instrument","interest","invention","market","manager","money","office","oil","operation","owner","payment","plant","produce","profit","system","trade","transport"]},{name:"Education",words:["art","authority","chalk","development","direction","education","encylopedia","growth","history","ink","language","law","learning","letter","music","news","paint","paper","paste","pen","pencil","reading","reason","religion","rule","say","science","school","scissors","square","stamp","talk","teaching","test","theory","thought","word","writing"]},{name:"Political",words:["act","agreement","authority","committee","control","country","crime","debt","decision","discussion","distribution","division","education","government","history","judge","language","law","meeting","nation","office","order","organization","political","power","property","protest","punishment","record","religion","representative","secretary","society","tax"]},{name:"War",words:["army","attack","boat","company","control","country","crush","damage","death","destruction","division","earth","effect","event","fight","fire","flame","general","gun","light","force","harbor","land","map","military","operation","order","organization","peace","plane","position","powder","power","push","range","river","road","sea","smash","support","vessel","war"]},{name:"Agriculture / Nature",words:["air","animal","cheese","cloud","cotton","dust","earth","field","farm","fruit","garden","grain","growth","ice","land","leaf","leather","meat","milk","mist","moon","mountain","natural","nut","plant","plow","price","process","produce","rain","range","rice","river","road","salt","sand","seed","sky","slope","snow","spade","star","stream","sun","thunder","water","weather","wind"]},{name:"Mathematics",words:["addition","amount","division","greater","less","number","power","product","root","times","angle","arch","ball","circle","cord","curve","line","plane","point","square","solid","square"]}]},exports.sources=oe;
//# sourceMappingURL=lingua-scraper.cjs.production.min.js.map
